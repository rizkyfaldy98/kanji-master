<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japanese Flashcards - Prototype</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sonner@1.5.0/dist/index.mjs" type="module"></script>

    <style>
        /* Basic global styles, overridden by Tailwind */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="module">
        // =======================================================
        // React & Convex/Clerk Setup for Single HTML File
        // =======================================================
        const { useState, useEffect, useRef, useCallback } = React;
        const ReactDOM = window.ReactDOM;

        // Mock `api` and `Id` since we don't have Convex's generated files in a single HTML
        const api = {
            flashcards: {
                getFlashcardsForReview: (...args) => { /* Placeholder for Convex query */ console.log("Calling getFlashcardsForReview mock with", args); return Promise.resolve([]); },
                getNewFlashcards: (...args) => { /* Placeholder */ console.log("Calling getNewFlashcards mock with", args); return Promise.resolve([]); },
                submitAnswer: (...args) => { /* Placeholder */ console.log("Calling submitAnswer mock with", args); return Promise.resolve(); },
                getUserStats: (...args) => { /* Placeholder */ console.log("Calling getUserStats mock with", args); return Promise.resolve({ totalCards: 0, studiedCards: 0, dueCards: 0, accuracy: 0, totalStudyTime: 0 }); },
                addFlashcard: (...args) => { /* Placeholder */ console.log("Calling addFlashcard mock with", args); return Promise.resolve("mockId"); }
            },
            auth: {
                loggedInUser: (...args) => { /* Placeholder */ console.log("Calling loggedInUser mock with", args); return Promise.resolve(null); }
            }
        };

        // Simplified Id type for direct use
        class Id {
            constructor(collection, value) {
                this.collection = collection;
                this.value = value;
            }
            toString() {
                return `${this.collection}:${this.value}`;
            }
        }

        // Placeholder for Convex hooks - these need Convex's actual React library
        // This is the trickiest part for a single HTML file due to deep imports.
        // For a true local run, you'd run `npm create vite` and use the actual Convex/React setup.
        // For *this* single file, we'll try to emulate the hooks, but warn that full Convex/Clerk
        // integration will require a proper development server.
        // The Convex/React and Clerk/React libraries are complex and designed for a Node.js/bundler environment.
        // Directly embedding them from CDN and making them work together in a single script tag is very difficult.
        // Instead, I'll provide a *simulated* version of the data fetching and auth for a basic visual peek.
        // To get the *actual* Convex/Clerk functionality, the user *must* follow the previous
        // project setup and run `npx convex dev` and `npm run dev`.

        // Since the user specifically asked for "peek" in an HTML file, I will create a
        // **highly simplified mock** for useQuery, useMutation, ClerkProvider, etc.
        // This will allow the UI to *render* and *interact* with dummy data,
        // but it will NOT connect to Convex or Clerk. This manages user expectation.

        const mockConvexData = {
            flash